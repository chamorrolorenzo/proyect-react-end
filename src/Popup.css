/* ===== Popup / Modal (independiente) =====
   Pegá esto tal cual. Usa tokens si existen y
   cae en defaults si no.                                    */

/* Backdrop pleno */
.modal-backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  display: grid;
  place-items: center;
  z-index: 1000; /* sobre cualquier overlay */
  animation: modal-fade .12s ease-out;
}

/* Contenedor del popup */
.modal{
  width: min(560px, 92vw);
  background: var(--popup-bg, #0e1320);
  color: var(--popup-fg, #e7eefc);
  border: 1px solid var(--popup-border, rgba(255,255,255,.12));
  border-radius: 14px;
  box-shadow: var(--popup-shadow, 0 10px 40px rgba(0,0,0,.5));
  outline: none;
  transform: translateY(6px) scale(.98);
  animation: modal-pop .16s ease-out forwards;
}

/* Cabezal y pie */
.modal-header, .modal-footer{
  padding: 12px 16px;
  display:flex;
  align-items:center;
  gap:10px;
  border-bottom: 1px solid var(--popup-border, rgba(255,255,255,.12));
}
.modal-header h3{
  margin:0;
  font-size: var(--popup-title, 18px);
  font-weight: 600;
}
.modal-header .close-btn{
  margin-left:auto;
  appearance:none;
  border:0;
  background: transparent;
  color: var(--popup-close, #e7eefc);
  width: 32px; height: 32px;
  border-radius: 8px;
  display: inline-grid;
  place-items: center;
  cursor: pointer;
}
.modal-header .close-btn:hover{
  background: var(--popup-hover, rgba(255,255,255,.08));
}

.modal-footer{
  border-bottom: 0;
  border-top: 1px solid var(--popup-border, rgba(255,255,255,.12));
  justify-content: flex-end;
  gap: 8px;
}

/* Cuerpo */
.modal-body{
  padding: 14px 16px;
  display: grid;
  gap: 14px;
}

/* Campos */
.field{
  display: grid;
  gap: 6px;
}
.field label{
  font-size: var(--popup-label, 14px);
  color: var(--popup-muted, #94a3b8);
}
.field select,
.field input[type="text"],
.field input[type="password"],
.field button{
  font-size: var(--popup-control, 14px);
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid var(--popup-border, rgba(255,255,255,.12));
  background: var(--popup-ctrl-bg, #0e1320);
  color: var(--popup-fg, #e7eefc);
}

/* Botones */
.button,
.modal-footer .button,
.modal-body .button{
  font-size: var(--popup-control, 14px);
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--popup-border, rgba(255,255,255,.12));
  background: var(--popup-ctrl-bg, #0e1320);
  color: var(--popup-fg, #e7eefc);
  cursor: pointer;
}
.button.primary,
.modal-footer .button.primary{
  background: var(--popup-accent, #4f9cff);
  color: var(--popup-accent-fg, #0b1020);
  border-color: transparent;
  font-weight: 600;
}

/* Estados de foco accesibles */
.field select:focus,
.field input[type="text"]:focus,
.field input[type="password"]:focus,
.button:focus,
.modal-header .close-btn:focus{
  outline: 2px solid var(--popup-accent, #4f9cff);
  outline-offset: 2px;
}

/* Cierre al hacer click fuera (pointer-events ya viene por JS) */

/* Animaciones */
@keyframes modal-fade{
  from{ opacity: 0; } to{ opacity: 1; }
}
@keyframes modal-pop{
  to{ transform: translateY(0) scale(1); }
}

/* Responsive */
@media (max-width: 420px){
  .modal{
    width: 94vw;
    border-radius: 12px;
  }
  .modal-header, .modal-footer{ padding: 10px 12px; }
  .modal-body{ padding: 12px; gap: 12px; }
}

/* Compatibilidad con “modo energía” (opcional)
   Si tu sitio oscurece con un overlay, el z-index del modal
   ya lo supera. Si querés cambiar el look en ese modo:
*/
.energy .modal{
  background: var(--popup-bg-energy, #0c1020);
}
